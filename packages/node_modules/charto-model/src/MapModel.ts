// This file is part of charto-model, copyright (c) 2017 BusFaster Ltd.
// Released under the MIT license, see LICENSE.

import { IObservableArray } from 'mobx';
import { types as T, IModelType, ISnapshottable } from 'mobx-state-tree';
import { mst, shim, action, ModelInterface } from 'classy-mst';

import { Layer, LayerCode, ObservableLayerArray } from './Layer';

export const MapModelData = shim(T.model({
	layers: T.optional(T.array(Layer), []),
	zoom: 1
}));

export class MapModelCode extends MapModelData {

	@action
	addLayer(layer: Layer | typeof Layer.SnapshotType) {
		this.layers.push(Layer.create(layer));
	}

}

export const MapModel = mst(MapModelCode, MapModelData);
export type MapModel = typeof MapModel.Type;
