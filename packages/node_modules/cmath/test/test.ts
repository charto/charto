import { testCubic, solveCubic } from '..';

const step = 1 / 32;
const countList = [ 0, 0, 0, 0, 0, 0 ];

for(let a = -1; a <= 1; a += step) {
	for(let b = -1; b <= 1; b += step) {
		for(let c = -1; c <= 1; c += step) {
			for(let d = -1; d <= 1; d += step) {
				let foundSolve = false;
				const roots = solveCubic(a, b, c, d);

				for(let x of roots) {
					if(x >= -5E-6 && x <= 1+5E-6) foundSolve = true;
				}

				const result = testCubic(a, b, c, d);
				const foundTest = result > 0;

				const method = Math.abs(result);

				++countList[method - 1];

				if(foundSolve != foundTest && (a || b || c || d)) {
					console.error('Root count mismatch:');
					console.error([a, b, c, d].join(' ') + ' ' + foundSolve + ' ' + foundTest + ' ' + method);
					console.error(roots);
				}
			}
		}
	}
}

console.log(countList.map((count) => ~~(count / (65*65*65*65) * 100 + 0.5) + '%').join(' '));
