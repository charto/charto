// This file is part of charto-render, copyright (c) 2017 BusFaster Ltd.
// Released under the MIT license, see LICENSE.

import { BBox, LayerFeatures } from 'charto-model';

export interface RendererOptions {

	features: LayerFeatures;

	bbox: BBox;

	/** Width in physical pixels (already multiplied by pixelRatio). */
	pixelWidth: number;

	/** Height in physical pixels (already multiplied by pixelRatio). */
	pixelHeight: number;

	/** Logical to physical pixel multiplier for HiDPI displays. */
	pixelRatio?: number;

	zoom?: number;

}

export class RendererState {

	constructor(options: RendererOptions) {
		const { s, w, n, e } = options.bbox;
		this.pixelRatio = options.pixelRatio || 1;
		this.scaleX = options.pixelWidth / (e - w);
		this.scaleY = options.pixelHeight / (s - n);
		this.offsetX = -w * this.scaleX;
		this.offsetY = -n * this.scaleY;
	}

	pixelRatio: number;
	offsetX: number;
	offsetY: number;
	scaleX: number;
	scaleY: number;

	pointRadius: number;

}
