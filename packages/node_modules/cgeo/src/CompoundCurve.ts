// This file is part of cgeo, copyright (c) 2017 BusFaster Ltd.
// Released under the MIT license, see LICENSE.

import { GeometryKind, registerType } from './Geometry';
import { Curve } from './Curve';
import { MultiCurve, MultiCurveSpec, initCurves } from './MultiCurve';

export class CompoundCurve extends Curve implements MultiCurve {

	constructor(childList: MultiCurveSpec = []) {
		super();

		if(this.initProto) this.initProto();

		initCurves(this, childList);
	}

	initProto() {
		CompoundCurve.prototype.clone = MultiCurve.prototype.clone;
		CompoundCurve.prototype.transform = MultiCurve.prototype.transform;
		CompoundCurve.prototype.hasZ = MultiCurve.prototype.hasZ;
		CompoundCurve.prototype.hasM = MultiCurve.prototype.hasM;
		(CompoundCurve as any).initProto = null;
	}

	addChild(child: Curve) { this.childList.push(child); }

	childList: Curve[] = [];

}

registerType(CompoundCurve, GeometryKind.compoundCurve, 1);
