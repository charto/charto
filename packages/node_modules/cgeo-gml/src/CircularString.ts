// This file is part of cgeo-gml, copyright (c) 2017 BusFaster Ltd.
// Released under the MIT license, see LICENSE.

import * as cgeo from 'cgeo';
import { WriteState } from './Geometry';
import { Parser } from './Parser';
import { Point } from './Point';

@cgeo.mixin()
export class CircularString extends cgeo.CircularString {

	writeGML(state: WriteState) {
		return(cgeo.LineString.prototype.writeGML.call(this, state, state.gml.Arc));
	}

	static initGML(parser: Parser<any>) {
		Point.initGML(parser);
	}

	static finishGML(parser: Parser<any>): cgeo.CircularString | null {
		const coordList = parser.coordList;

		if(!coordList) return(null);

		parser.coordList = void 0;

		return(new cgeo.CircularString(coordList));
	}

}
