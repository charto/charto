// This file is part of cgeo-gml, copyright (c) 2017 BusFaster Ltd.
// Released under the MIT license, see LICENSE.

import * as cgeo from 'cgeo';
import { OpenToken, TokenElement } from 'cxml';
import { State } from './Geometry';

@cgeo.mixin()
export class LineString extends cgeo.LineString {

	writeGML(state: State, element = state.gml.LineString) {
		const { gml, buffer } = state;
		const { x, y, z, m } = this;
		const content: string[] = [];
		const count = x.length;
		let pt: string;

		for(let num = 0; num < count; ++num) {
			if(state.flipXY) {
				pt = y[num] + ' ' + x[num];
			} else {
				pt = x[num] + ' ' + y[num];
			}

			content.push(pt);
		}

		buffer.push(
			element,
			element.emitted,
			gml.posList,
			gml.posList.emitted,
			content.join(' '),
			gml.posList.close,
			element.close
		);
	}

}
